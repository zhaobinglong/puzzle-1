{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./src/css/puzzle.css","webpack:///./src/images/clipart.png","webpack:///./src/images/covers/a.jpg","webpack:///./src/images/covers/b.jpg","webpack:///./src/images/covers/c.jpg","webpack:///./src/images/covers/d.jpg","webpack:///./src/images/covers/e.jpg","webpack:///./src/images/pause@2x.png","webpack:///./src/images/pictures/a.jpg","webpack:///./src/images/pictures/b.jpg","webpack:///./src/images/pictures/c.jpg","webpack:///./src/images/pictures/d.jpg","webpack:///./src/images/pictures/e.jpg","webpack:///./src/images/play@2x.png","webpack:///./src/images/shade.jpg","webpack:///./src/script/Puzzle.es6","webpack:///./src/script/index.es6","webpack:///./src/script/lib/Event.es6","webpack:///./src/script/lib/Gridistribution.es6","webpack:///./src/script/lib/timer.es6","webpack:///./src/script/lib/utils.es6","webpack:///external \"TweenMax\"","webpack:///external \"PIXI\"","webpack:///external [\"PIXI\",\"filters\"]"],"names":["g","Function","e","window","module","exports","PIXI","skipHello","Puzzle","width","height","hasOwnProperty","touchstart","touchmove","touchend","tap","document","body","clientWidth","clientHeight","clientRatio","imageWidth","imageHeight","imageRatio","app","transparent","view","getElementById","antialias","stage","renderer","ticker","addEventListener","preventDefault","event","Event","totalTime","hidden","pause","isOff","resume","puzzle","set","x","y","pivotX","pivotY","addChild","fireworksContainer","cliparts","loader","Loader","add","name","url","require","load","shade","TextureCache","alpha","addChildAt","on","off","texture","paused","loaded","fireworks","i","rect","rr","Math","random","rg","rb","mask","beginFill","drawRect","sprite","generateCanvasTexture","shell","timeProgressBack","timeProgressFront","scaleX","interactive","turnOn","turnOff","dispatch","render","picture","setTimeout","enter","difficulty","destroyCliparts","timer","currentTime","TweenMax","killAll","showLoading","afterLoad","originBase","base","negative","visible","clip","hideLoading","fromTo","scaleY","onComplete","then","countdown","resources","col","row","total","clipart","clipWidth","Object","assign","index","selected","push","left","top","cacheAsBitmap","filters","bounds","getBounds","gridProps","cell","rectangles","grid","Gridistribution","cells","pick","length","count","reset","activeCliparts","startPositions","data","endPosition","global","identifier","activeClipart","startPosition","negativeCount","rotate","negativeRotate","x0","y0","touchendHandle","abs","lock","parent","getChildIndex","removeChild","fit","tweens","forEach","position","maxIndex","max","children","needFitRotation","toLocal","origin","boxOffsetX","boxOffsetY","PI","props","to","Promise","resolve","tl","TimelineLite","call","console","log","leftClipart","rightClipart","upClipart","downClipart","parentB","destroy","tween","kill","ease","Linear","easeNone","pass","displayShell","shellTimeline","undefined","rnd","tls","map","anchorX","anchorY","rotation","reject","clean","destroyChildren","destroyTextureCache","child","parentA","setInterval","timeProgress","pauseAll","stop","resumeAll","start","_difficulty","value","setDifficulty","percent","levels","thumb","instr","free","record","JSON","parse","localStorage","getItem","level","puzzleList","innerHTML","join","puzzleLevel","querySelectorAll","showPuzzleMap","puzzleMap","className","hidePuzzleMap","selectLevel","puzzleGame","updateRecord","back","puzzleAd","style","display","setItem","stringify","difficultyOpts","checked","init","alert","opt","resumeGame","onclick","defineEvent","cb","arg","len","register","splice","onceCb","Array","j","trim","a","floor","startCol","startRow","endCol","endRow","isRemoved","filter","shuffleCells","_shuffle","concat","slice","Timer","queue","Map","usingRAF","Reflect","defineProperty","RAF","enable","disable","fn","delay","id","Symbol","type","elapsed","config","item","get","key","play","playAll","delta","updateQueue","useRAF","update","tick","AnimationFrame","time","auto","bind","requestAnimationFrame","cancelAnimationFrame","proto","DisplayObject","prototype","offsetX","offsetY","defineProperties","scale","skewX","skew","skewY","pivot","anchor","coord","_tempDisplayObjectParent","pointA","_left","_top","pointB","Point","right","_right","bottom","_bottom","t","_t","velocityX","velocityY","accelerationX","accelerationY","_index","setChildIndex","_addChild","Container","arguments","apply","_addChildAt","dirty","getContentBox","cp","clone","graphicsData","graphics","lineWidth","_cwidth","_cheight","Graphics","writable","cache","RenderTexture","create","setTransform","evt","createEvent","initEvent","dispatchEvent"],"mappings":"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","file":"./script/index-3d0689.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script/index.es6\");\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// removed by extract-text-webpack-plugin","module.exports = __webpack_public_path__ + \"./images/clipart-fbd686.png\";","module.exports = __webpack_public_path__ + \"./images/a-b62648.jpg\";","module.exports = __webpack_public_path__ + \"./images/b-617030.jpg\";","module.exports = __webpack_public_path__ + \"./images/c-218762.jpg\";","module.exports = __webpack_public_path__ + \"./images/d-5b5e47.jpg\";","module.exports = __webpack_public_path__ + \"./images/e-364604.jpg\";","module.exports = __webpack_public_path__ + \"./images/pause@2x-fef54b.png\";","module.exports = __webpack_public_path__ + \"./images/a-85b826.jpg\";","module.exports = __webpack_public_path__ + \"./images/b-c9b29e.jpg\";","module.exports = __webpack_public_path__ + \"./images/c-21e980.jpg\";","module.exports = __webpack_public_path__ + \"./images/d-d7cfe9.jpg\";","module.exports = __webpack_public_path__ + \"./images/e-55ce8c.jpg\";","module.exports = __webpack_public_path__ + \"./images/play@2x-982c2f.png\";","module.exports = __webpack_public_path__ + \"./images/shade-bc0975.jpg\";","/*\n\t@ author: leeenx\n\t@ 拼图\n*/\n\nimport * as PIXI from '@pixi'\nimport * as filters from '@pixi-extra-filters'\nimport { TweenMax, TimelineLite, Linear } from '@gsap/tween-max'\n\n// 安装模块\nimport './lib/utils'\nimport Gridistribution from './lib/Gridistribution'\nimport timer from './lib/timer'\nimport Event from './lib/Event'\nPIXI.utils.skipHello()\n\nclass Puzzle {\n\tconstructor() {\n\t\tthis.width = 375\n\t\tthis.height = 603\n\n\t\t// 事件兼容\n\t\tif(window.hasOwnProperty('ontouchstart') === true) {\n\t\t\tthis.touchstart = 'touchstart'\n\t\t\tthis.touchmove = 'touchmove'\n\t\t\tthis.touchend = 'touchend'\n\t\t\tthis.tap = 'tap'\n\t\t}\n\t\telse {\n\t\t\tthis.touchstart = 'mousedown'\n\t\t\tthis.touchmove = 'mousemove'\n\t\t\tthis.touchend = 'mouseup'\n\t\t\tthis.tap = 'click'\n\t\t}\n\n\t\t// 全屏适配\n\t\tlet {clientWidth, clientHeight} = document.body\n\t\tlet clientRatio = clientWidth / clientHeight\n\t\t// 长屏\n\t\tif(clientRatio < this.width / this.height) {\n\t\t\tthis.height = this.width / clientRatio\n\t\t}\n\t\t// 短屏\n\t\telse {\n\t\t\tthis.width = this.height * clientRatio\n\t\t}\n\n\t\t// 拼图尺寸\n\t\tthis.imageWidth = 300 * .88 >> 0\n\t\tthis.imageHeight = 450 * .88 >> 0\n\t\t\n\t\t// 图片与视窗的比率 \n\t\tthis.imageRatio = this.imageWidth / this.width\n\n\t\tthis.app = new PIXI.Application(\n\t\t\t{\n\t\t\t\twidth: this.width, \n\t\t\t\theight: this.height, \n\t\t\t\ttransparent: true, \n\t\t\t\tview: document.getElementById('puzzleGame'), \n\t\t\t\tantialias: true\n\t\t\t}\n\t\t)\n\t\tthis.stage = this.app.stage\n\t\tthis.renderer = this.app.renderer\n\t\tthis.ticker = this.app.ticker\n\t\tthis.app.view.addEventListener(this.touchstart, e => e.preventDefault())\n\n\t\t// 事件\n\t\tthis.event = new Event()\n\n\t\t// 默认倒计时长\n\t\tthis.totalTime = 60\n\n\t\t// 做挂起监听\n\t\tdocument.addEventListener('visibilitychange', e => {\n\t\t    e.hidden === true ? this.pause() : this.isOff !== true && this.resume()\n\t\t}, true)\n\t}\n\tget difficulty() {\n\t\treturn this._difficulty\n\t}\n\tset difficulty(value) {\n\t\tif(this._difficulty !== value) {\n\t\t\tthis._difficulty = value\n\t\t\tthis.setDifficulty()\n\t\t}\n\t} \n\tinit() { \n\t\t// 拼图容器\n\t\tthis.puzzle = new PIXI.Container()\n\t\tthis.puzzle.set(\n\t\t\t{\n\t\t\t\tx: this.width / 2, \n\t\t\t\ty: this.height / 2, \n\t\t\t\tpivotX: this.imageWidth / 2, \n\t\t\t\tpivotY: this.imageHeight / 2 \n\t\t\t}\n\t\t)\n\t\t// 加入舞台\n\t\tthis.stage.addChild(this.puzzle)\n\n\t\t// 礼花容器\n\t\tthis.fireworksContainer = new PIXI.Container()\n\n\t\t// 拼图数组\n\t\tthis.cliparts = []\n\t\tlet loader = new PIXI.loaders.Loader()\n\t\t// 加载必须图片\n\t\tloader.add(\n\t\t\t\t[\n\t\t\t\t\t{name: 'shade', url: require('../images/shade.jpg')}, \n\t\t\t\t\t{name: 'clipart', url: require('../images/clipart.png')}, \n\t\t\t\t\t{name: 'pause', url: require('../images/pause@2x.png')}, \n\t\t\t\t\t{name: 'play', url: require('../images/play@2x.png')}\n\t\t\t\t]\n\t\t\t)\n\t\t\t.load(() => {\n\t\t\t\tlet shade = new PIXI.Sprite(PIXI.utils.TextureCache['shade'])\n\t\t\t\tshade.set(\n\t\t\t\t\t{\n\t\t\t\t\t\talpha: .99, \n\t\t\t\t\t\twidth: this.width, \n\t\t\t\t\t\theight: this.height\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tthis.stage.addChildAt(shade, 0)\n\t\t\t\t// 开关\n\t\t\t\tthis.on = PIXI.utils.TextureCache['play']\n\t\t\t\tthis.off = PIXI.utils.TextureCache['pause']\n\t\t\t\tthis.switch.texture = this.paused === true ? this.on : this.off\n\t\t\t\tthis.loaded = true\n\t\t\t\t// 生成礼花\n\t\t\t\tthis.fireworks = []\n\t\t\t\t// 默认礼花\n\t\t\t\tfor(let i = 0; i < 24; ++i) {\n\t\t\t\t\tlet rect = new PIXI.Graphics()\n\t\t\t\t\tlet rr = Math.random() * 0xFF | 0\n\t\t\t\t    let rg = Math.random() * 0xFF | 0\n\t\t\t\t    let rb = Math.random() * 0xFF | 0\n\t\t\t\t    let width = 80\n\t\t\t\t    let height = 80\n\t\t\t\t    let mask = new PIXI.Sprite(PIXI.utils.TextureCache['clipart'])\n\t\t\t\t    mask.set({width: width, height: height})\n\t\t\t\t\trect.beginFill((rr << 16) + (rg << 8) + rb, 1).drawRect(0, 0, width, height)\n\t\t\t\t\tlet sprite = new PIXI.Sprite(rect.generateCanvasTexture())\n\t\t\t\t\tsprite.mask = mask\n\t\t\t\t\tsprite.addChild(mask)\n\t\t\t\t\tlet shell = new PIXI.Sprite(sprite.generateCanvasTexture(this.renderer))\n\t\t\t\t\tthis.fireworks[i] = shell\n\t\t\t\t}\n\t\t\t})\n\t\t// 时间进度条容器\n\t\tthis.timeProgressBack = new PIXI.Graphics()\n\t\tthis.timeProgressBack.beginFill(0x6190e7, 1).drawRect(0, 0, this.width, 5)\n\t\tthis.timeProgressFront = new PIXI.Graphics()\n\t\tthis.timeProgressFront.beginFill(0x70BF41, 1).drawRect(0, 0, this.width, 5)\n\t\tthis.timeProgressFront.scaleX = 0;  \n\t\tthis.timeProgressBack.addChild(this.timeProgressFront)\n\t\tthis.stage.addChild(this.timeProgressBack)\n\t\t// 暂停按钮\n\t\tthis.switch = new PIXI.Sprite()\n\t\tthis.switch.set({width: 32, height: 32, y: 6, x: this.width - 36})\n\t\tthis.stage.addChild(this.switch)\n\t\tthis.switch.interactive = true\n\t\tthis.switch.on(this.tap, e => this.paused === true ? this.turnOn() : this.turnOff())\n\t}\n\tturnOn() {\n\t\tthis.resume()\n\t\tthis.switch.texture = this.off\n\t\tthis.event.dispatch('resume')\n\t\tthis.isOff = false\n\t\tthis.renderer.render(this.stage)\n\t}\n\tturnOff() {\n\t\tthis.pause()\n\t\tthis.switch.texture = this.on\n\t\tthis.event.dispatch('pause')\n\t\tthis.isOff = true\n\t\tthis.renderer.render(this.stage)\n\t}\n\tset timeProgress(value) {\n\t\tlet percent = (this.totalTime - value) / this.totalTime\n\t\tthis.timeProgressFront.scaleX = percent > 1 ? 1 : percent\n\t} \n\t// 进入对应的图片\n\tenter(picture) {\n\t\t// 未加载成功 \n\t\tif(this.loaded !== true) { \n\t\t\tsetTimeout(()=> this.enter(picture, difficulty), 100)\n\t\t\treturn \n\t\t}\n\t\t// 销毁上次的拼块\n\t\tthis.destroyCliparts()\n\t\t// 清空倒计时\n\t\ttimer.delete(this.timer)\n\t\t// 重置时长 \n\t\tthis.currentTime = this.totalTime\n\t\tthis.timeProgressFront.scaleX = 0\n\n\t\t// 清空所有动画\n\t\tTweenMax.killAll()\n\n\t\t// 如果暂停了，恢复\n\t\tthis.isOff === true && this.turnOn()\n\n\t\tthis.showLoading()\n\n\t\tlet afterLoad = () => {\n\t\t\t// 生成拼图的底层纹理 \n\t\t\tlet originBase = new PIXI.Sprite(PIXI.utils.TextureCache[picture])\n\t\t\t// 重置尺寸 \n\t\t\toriginBase.set(\n\t\t\t\t{\n\t\t\t\t\twidth: this.imageWidth, \n\t\t\t\t\theight: this.imageHeight\n\t\t\t\t}\n\t\t\t)\n\t\t\t// this.base 挂载原始图片的快照 \n\t\t\tthis.base = originBase.generateCanvasTexture(this.renderer)\n\t\t\t// 拼图的底片 \n\t\t\tthis.negative = new PIXI.Sprite(this.base)\n\t\t\tthis.negative.set(\n\t\t\t\t{\n\t\t\t\t\tx: this.puzzle.x, \n\t\t\t\t\ty: this.puzzle.y, \n\t\t\t\t\tpivotX: this.puzzle.pivotX, \n\t\t\t\t\tpivotY: this.puzzle.pivotY, \n\t\t\t\t\talpha: .2, \n\t\t\t\t\tvisible: false\n\t\t\t\t}\n\t\t\t)\n\n\t\t\tthis.stage.addChildAt(this.negative, 1)\n\t\t\tthis.clip()\n\t\t\tthis.hideLoading()\n\t\t\t// 拼图收缩\n\t\t\tTweenMax.fromTo(\n\t\t\t\tthis.puzzle, 1, \n\t\t\t\t{\n\t\t\t\t\tscaleX: 1 / this.imageRatio, \n\t\t\t\t\tscaleY: 1 / this.imageRatio\n\t\t\t\t}, \n\t\t\t\t{\n\t\t\t\t\tscaleX: 1, \n\t\t\t\t\tscaleY: 1, \n\t\t\t\t\t// 拼图分散后，倒计时开始\n\t\t\t\t\tonComplete: ()=> this.break().then(e => this.countdown())\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\tPIXI.loader.resources[picture] ? afterLoad() : PIXI.loader.add(picture).load(afterLoad)\n\t}\n\n\t// 设置难度\n\tsetDifficulty() {\n\t\t// 行列数生成\n\t\tthis.col = this.difficulty * 2\n\t\tthis.row = this.difficulty * 3\n\t\t// 总数\n\t\tthis.total = this.col * this.row\n\t\t/*\n\t\t\t@ 计算拼块的尺寸\n\t\t\t@ 原始大小: 300x300\n\t\t\t@ 镂空尺寸为 65\n\t\t\t@ (拼图宽 + 2个镂空) / 列数 = 拼块宽 - 镂空\n\t\t\t@ 镂空 / 拼块宽 = 65 / 300\n\t\t*/\n\t\tthis.clipart = {}\n\t\t// 按照难度剪裁后的宽度 \n\t\tconst width = this.imageWidth / (this.col * 235 / 300 - 65 * 2 / 300) >> 0\n\t\tconst clipWidth = width * 65 / 300 >> 0\n\t\tObject.assign(\n\t\t\tthis.clipart,\n\t\t\t{ width, height: width, clipWidth}\n\t\t)\n\t}\n\n\t// 显示加载\n\tshowLoading() {\n\n\t}\n\n\t// 隐藏加载\n\thideLoading() {\n\n\t}\n\n\t// 将图像剪裁成拼图碎片\n\tclip() {\n\t\t// 清空 cliparts\n\t\tthis.cliparts = []\n\t\t// 清空数组\n\t\tthis.cliparts = []\n\t\tlet x = 0\n\t\tlet y = 0\n\t\tfor(let row = 0; row < this.row; ++row) { \n\t\t\tx = 0\n\t\t\tfor(let col = 0; col < this.col; ++col) { \n\t\t\t\tlet clipart = {\n\t\t\t\t\tindex: row * this.col + col, \n\t\t\t\t\twidth: this.clipart.width, \n\t\t\t\t\theight: this.clipart.height, \n\t\t\t\t\tx: x, \n\t\t\t\t\ty: y\n\t\t\t\t}\n\t\t\t\tlet mask = new PIXI.Sprite(PIXI.utils.TextureCache['clipart'])\n\t\t\t\tthis.stage.addChild(mask)\n\t\t\t\tmask.width = mask.height = this.clipart.width\n\t\t\t\tif(0 === row) {\n\t\t\t\t\tclipart.height -= this.clipart.clipWidth\n\t\t\t\t\tmask.y = -this.clipart.clipWidth\n\t\t\t\t}\n\t\t\t\tif(0 === col) {\n\t\t\t\t\tclipart.width -= this.clipart.clipWidth\n\t\t\t\t\tmask.x = -this.clipart.clipWidth\n\t\t\t\t}\n\t\t\t\t// 对底纹进行裁剪\n\t\t\t\t{ \n\t\t\t\t\tlet x = clipart.x\n\t\t\t\t\tlet y = clipart.y\n\t\t\t\t\tlet width = clipart.width\n\t\t\t\t\tlet height = clipart.height\n\t\t\t\t\tif(x + width > this.base.width) {\n\t\t\t\t\t\twidth = this.base.width - x\n\t\t\t\t\t}\n\t\t\t\t\tif(y + height > this.base.height) {\n\t\t\t\t\t\theight = this.base.height - y\n\t\t\t\t\t}\n\t\t\t\t\t// 拼块\n\t\t\t\t\tclipart.sprite = new PIXI.Sprite(\n\t\t\t\t\t\tnew PIXI.Texture(\n\t\t\t\t\t\t\tthis.base, \n\t\t\t\t\t\t\tnew PIXI.Rectangle(x, y, width, height)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t// 被选中的拼块\n\t\t\t\t\tclipart.selected = new PIXI.Sprite(clipart.sprite.texture)\n\t\t\t\t} \n\t\t\t\t// console.log(col, row, x, y)\n\t\t\t\tthis.cliparts.push(clipart)\n\t\t\t\tclipart.sprite.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tleft: x,  \n\t\t\t\t\t\ttop: y, \n\t\t\t\t\t\tmask: mask, \n\t\t\t\t\t\tcacheAsBitmap: true \n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tclipart.selected.set(\n\t\t\t\t\t{ \n\t\t\t\t\t\tmask: mask, \n\t\t\t\t\t\tfilters: [new filters.GlowFilter(10, 1.5, 1.5, 0x333333, .3)], \n\t\t\t\t\t\tcacheAsBitmap: true \n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tthis.puzzle.addChild(clipart.sprite)\n\n\t\t\t\t// 下一个拼块的 x 坐标\n\t\t\t\tx += clipart.width - this.clipart.clipWidth\n\t\t\t\tif(col === this.col - 1) { \n\t\t\t\t\t// 下一行拼块的 y 坐标\n\t\t\t\t\ty += clipart.height - this.clipart.clipWidth\n\t\t\t\t} \n\t\t\t} \n\t\t}\n\t}\n\t// 打散拼块\n\tbreak() {\n\t\t// this.puzzle 的坐标\n\t\tlet bounds = this.puzzle.getBounds()\n\t\tlet [x, y] = [bounds.x, bounds.y]\n\t\tthis.gridProps = {\n\t\t\twidth: this.width, \n\t\t\theight: this.height, \n\t\t\t// 最小面积\n\t\t\tcell: {\n\t\t\t\twidth: this.clipart.width * .8\n\t\t\t}, \n\t\t\t// 标记禁区\n\t\t\trectangles: [ \n\t\t\t\t// 右上角暂停按钮\n\t\t\t\t{\n\t\t\t\t\tx: this.width - 36, \n\t\t\t\t\ty: 0, \n\t\t\t\t\twidth: 36, \n\t\t\t\t\theight: 36\n\t\t\t\t}, \n\t\t\t\t// 中心拼图底图区\n\t\t\t\t{\n\t\t\t\t\tx: (this.width - this.imageWidth) / 2, \n\t\t\t\t\ty: (this.height- this.imageHeight) / 2, \n\t\t\t\t\twidth: this.imageWidth, \n\t\t\t\t\theight: this.imageHeight\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t\tlet grid = new Gridistribution(this.gridProps)\n\t\t// 提取随机格子\n\t\tlet cells = grid.pick(this.cliparts.length)\n\t\tlet count = 0\n\t\tlet width = this.gridProps.cell.width\n\t\twhile(cells.length === 0 && ++count < 10) { \n\t\t\t// 面积不够，取一半值\n\t\t\twidth = width * .8\n\t\t\tthis.gridProps.cell.width = width\n\t\t\tgrid.reset(this.gridProps)\n\t\t\tcells = grid.pick(this.cliparts.length)\n\t\t}\n\n\t\t// 显示底片\n\t\tthis.negative.visible = true\n\n\t\t// 手指下的拼块（multiple touch）\n\t\tlet activeCliparts = []\n\n\t\t// 起始坐标（multiple touch）\n\t\tlet startPositions = []\n\n\t\t// 舞台添加事件\n\t\tthis.stage.interactive = true\n\t\tthis.stage.on(\n\t\t\tthis.touchmove,\n\t\t\t({\n\t\t\t\tdata, data: { global: endPosition, identifier }\n\t\t\t}) => {\n\t\t\tconst activeClipart = activeCliparts[identifier] || null\n\t\t\tconst startPosition = startPositions[identifier] || null\n\t\t\tif(activeClipart !== null && startPosition !== null) { \n\t\t\t\tif(--activeClipart.negativeCount >= 0) {\n\t\t\t\t\tactiveClipart.rotate += activeClipart.negativeRotate\n\t\t\t\t}\n\t\t\t\tlet left = activeClipart.x0 + endPosition.x - startPosition.x\n\t\t\t\tlet top = activeClipart.y0 + endPosition.y - startPosition.y\n\t\t\t\t// 侧滑会导致负坐标直接调用touchend\n\t\t\t\tif(left < -this.puzzle.x) {\n\t\t\t\t\ttouchendHandle({ data })\n\t\t\t\t\treturn \n\t\t\t\t}\n\t\t\t\tactiveClipart.selected.set(\n\t\t\t\t\t{\n\t\t\t\t\t\trotate: activeClipart.rotate, \n\t\t\t\t\t\tleft: left, \n\t\t\t\t\t\ttop: top\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t})\n\n\t\tlet touchendHandle = ({\n\t\t\tdata: { identifier }\n\t\t}) => {\n\t\t\tconst activeClipart = activeCliparts[identifier] || null\n\t\t\tif(activeClipart === null) return \n\t\t\t// 吸附效果 \n\t\t\tif(Math.abs(activeClipart.x - activeClipart.selected.left) <= 15 && Math.abs(activeClipart.y - activeClipart.selected.top) <= 15) {\n\t\t\t\tactiveClipart.selected.rotate = 0\n\t\t\t\tactiveClipart.selected.left = activeClipart.x\n\t\t\t\tactiveClipart.selected.top = activeClipart.y\n\t\t\t\t// 锁定\n\t\t\t\tactiveClipart.lock = true\n\t\t\t}\n\t\t\t// 初始坐标值变化\n\t\t\tactiveClipart.x0 = activeClipart.selected.left\n\t\t\tactiveClipart.y0 = activeClipart.selected.top\n\n\t\t\t// 正常拼块与选中拼块属性同步\n\t\t\tactiveClipart.sprite.set(\n\t\t\t\t{\n\t\t\t\t\ttop: activeClipart.selected.top, \n\t\t\t\t\tleft: activeClipart.selected.left, \n\t\t\t\t\trotate: activeClipart.selected.rotate\n\t\t\t\t}\n\t\t\t)\n\n\t\t\t// 当前索引\n\t\t\tlet index = activeClipart.selected.parent.getChildIndex(activeClipart.selected)\n\n\t\t\t// 移除选中拼块\n\t\t\tthis.puzzle.removeChild(activeClipart.selected)\n\t\t\t// 将拼块安装到对应位置上\n\t\t\tif(activeClipart.lock === true) {\n\t\t\t\tthis.fit(activeClipart)\n\t\t\t}\n\t\t\t// 替换成正常拼块\n\t\t\telse {\n\t\t\t\tthis.puzzle.addChildAt(activeClipart.sprite, index)\n\t\t\t} \n\n\t\t\t// 清空对象\n\t\t\tdelete activeCliparts[identifier]\n\t\t\tdelete startPositions[identifier]\n\t\t}\n\n\t\tthis.stage.on(this.touchend, touchendHandle)\n\n\t\t// 动画数组 \n\t\tlet tweens = []\n\t\t\n\t\t// 分布\n\t\tthis.cliparts.forEach((clipart, index) => { \n\t\t\t// 拼块\n\t\t\tlet sprite = clipart.sprite\n\t\t\t// 选中拼块\n\t\t\tlet selected = clipart.selected\n\t\t\t// 开启点击检测\n\t\t\tsprite.interactive = true\n\t\t\t// 添加事件\n\t\t\tsprite.on(this.touchstart, ({ data: { global: position, identifier } }) => {\n\t\t\t\t// 暂停中\n\t\t\t\tif(this.paused === true) return \n\t\t\t\t// 固定\n\t\t\t\tif(clipart.lock === true) { \n\t\t\t\t\t// 禁止交互\n\t\t\t\t\tsprite.interactive = false\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet parent = sprite.parent\n\t\t\t\t// 移除当前 sprite\n\t\t\t\tparent.removeChild(sprite)\n\t\t\t\t// 最高索引值\n\t\t\t\tlet maxIndex = Math.max(parent.children.length - 1, 0)\n\t\t\t\t// 替换成 selected \n\t\t\t\tparent.addChildAt(selected, maxIndex)\n\n\t\t\t\t// 拼块需要摆正 \n\t\t\t\tif(selected.rotate !== 0) { \n\t\t\t\t\tselected.needFitRotation = true\n\t\t\t\t\tlet {x, y} = selected.toLocal(position)\n\t\t\t\t\tselected.origin = sprite.origin = [x, y]\n\t\t\t\t\t// origin会引起盒子位置变化，以下是修正位置\n\t\t\t\t\tclipart.x0 += selected.boxOffsetX\n\t\t\t\t\tclipart.y0 += selected.boxOffsetY\n\t\t\t\t\tselected.set({left: clipart.x0, top: clipart.y0})\n\t\t\t\t} \n\t\t\t\tactiveCliparts[identifier] = clipart\n\t\t\t\tstartPositions[identifier] = {x: position.x, y: position.y}\n\t\t\t})\n            \n            // 给拼块随机一个旋转的角度\n\t\t\tclipart.rotate = (Math.random() - .5) * Math.PI / 4\n            \n            // 计算拼块位移的横轴距离和纵轴距离\n            // 现在有个问题是拼块有可能会偏移出屏幕，无法点击\n\t\t\tclipart.x0 = cells[index].x - x - 50\n\t\t\tclipart.y0 = cells[index].y - y\n\t\t\t\n\t\t\t// 边拖边回正角度参数\n\t\t\tclipart.negativeCount = 10\n\t\t\tclipart.negativeRotate = -clipart.rotate / clipart.negativeCount\n\n\t\t\t// 拼块的属性\n\t\t\tlet props = {\n\t\t\t\tleft: clipart.x0, \n\t\t\t\ttop: clipart.y0, \n\t\t\t\trotate: clipart.rotate\n\t\t\t}\n\n\t\t\t// 拼块\n\t\t\t// TweenMax.to(sprite, .6, props)\n\t\t\t// .3是控制拼块从整体到打乱的的速度\n\t\t\ttweens.push(TweenMax.to(sprite, .3, props))\n\t\t\t// 选中拼块信息同步\n\t\t\tselected.set(props)\n\t\t})\n\n\t\t// 返回 Promise\n\t\treturn new Promise(\n\t\t\t(resolve) => {\n\t\t\t\tlet tl = new TimelineLite()\n\t\t\t\ttl.add(tweens, 0, 'start', .01).call(() => resolve())\n\t\t\t}\n\t\t)\n\t}\n\t// 安装拼块\n\tfit(clipart) {\n\t\tconsole.log('start fit', clipart)\n\t\t// 当前拼块索引\n\t\tlet index = clipart.index\n\t\t// 左边拼块\n\t\tlet leftClipart = index % this.col === 0 ? {lock: false} : this.cliparts[index - 1]\n\t\t// 右边拼块\n\t\tlet rightClipart = index % this.col === this.col - 1 ? {lock: false} : this.cliparts[index + 1]\n\t\t// 上边拼块\n\t\tlet upClipart = index < this.col ? {lock: false} : this.cliparts[index - this.col]\n\t\t// 下边的拼块\n\t\tlet downClipart = index / this.col >> 0 === this.row - 1 ? {lock: false} : this.cliparts[index + this.col]\n\t\t// 容器\n\t\tlet parent = null\n\t\t// 左拼块存在\n\t\tif(leftClipart.lock === true) { \n\t\t\tparent = leftClipart.sprite.parent\n\t\t}\n\t\t// 右拼块存在\n\t\tif(rightClipart.lock === true) { \n\t\t\tif(parent === null) {\n\t\t\t\tparent = rightClipart.sprite.parent\n\t\t\t}\n\t\t\t// 合并容器\n\t\t\telse {\n\t\t\t\tlet parentB = rightClipart.sprite.parent\n\t\t\t\tif(parentB === null) console.log('报错了', rightClipart, rightClipart.sprite, rightClipart.selected)\n\t\t\t\tif(parent !== parentB) {\n\t\t\t\t\tlet children = parentB.children\n\t\t\t\t\twhile(children.length > 0) {\n\t\t\t\t\t\tparent.addChild(children[0])\n\t\t\t\t\t} \n\t\t\t\t\t// 销毁\n\t\t\t\t\tparentB.destroy();  \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 上边拼块存在\n\t\tif(upClipart.lock === true) { \n\t\t\tif(parent === null) {\n\t\t\t\tparent = upClipart.sprite.parent\n\t\t\t}\n\t\t\t// 合并容器\n\t\t\telse { \n\t\t\t\tlet parentB = upClipart.sprite.parent\n\t\t\t\tif(parentB === null) console.log('报错了',upClipart, upClipart.sprite, upClipart.selected)\n\t\t\t\tif(parent !== parentB) {\n\t\t\t\t\tlet children = parentB.children\n\t\t\t\t\twhile(children.length > 0) {\n\t\t\t\t\t\tparent.addChild(children[0])\n\t\t\t\t\t} \n\t\t\t\t\t// 销毁\n\t\t\t\t\tparentB.destroy();  \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 下边拼块存在\n\t\tif(downClipart.lock === true) { \n\t\t\tif(parent === null) {\n\t\t\t\tparent = downClipart.sprite.parent\n\t\t\t}\n\t\t\t// 合并容器\n\t\t\telse {\n\t\t\t\tlet parentB = downClipart.sprite.parent\n\t\t\t\tif(parentB === null) console.log('报错了', downClipart, downClipart.sprite, downClipart.selected)\n\t\t\t\tif(parent !== parentB) {\n\t\t\t\t\tlet children = parentB.children\n\t\t\t\t\twhile(children.length > 0) {\n\t\t\t\t\t\tparent.addChild(children[0])\n\t\t\t\t\t} \n\t\t\t\t\t// 销毁\n\t\t\t\t\tparentB.destroy();  \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 在一个空位置\n\t\tif(parent === null) {\n\t\t\tparent = new PIXI.Container()\n\t\t\t// 与 puzzle 容器保持一致\n\t\t\tparent.set(\n\t\t\t\t{\n\t\t\t\t\tx: this.puzzle.x, \n\t\t\t\t\ty: this.puzzle.y, \n\t\t\t\t\tpivotX: this.puzzle.pivotX, \n\t\t\t\t\tpivotY: this.puzzle.pivotY, \n\t\t\t\t\tscaleX: this.puzzle.scaleX, \n\t\t\t\t\tscaleY: this.puzzle.scaleY\n\t\t\t\t}\n\t\t\t)\n\t\t\tthis.stage.addChildAt(parent, 2)\n\t\t}\n\n\t\t// 当前拼块安装到对应的容器\n\t\tparent.addChild(clipart.sprite)\n\n\t\t// 容器的动画\n\t\tparent.tween && parent.tween.kill()\n\t\tparent.tween = TweenMax.fromTo(parent, .6, {alpha: .4}, {alpha: 1, ease: Linear.easeNone})\n\n\t\t// 判断游戏是否通关\n\t\tconsole.log('here is puzzle.children')\n\t\tconsole.log(this.puzzle.children)\n\t\tif(this.puzzle.children.length === 0) {\n\t\t\tthis.pass()\n\t\t}\n\t}\n\tpass() { \n\t\ttimer.delete(this.timer)\n\t\tthis.displayShell().then(e => {\n\t\t\tconsole.log(e)\n\t\t\tthis.event.dispatch('pass', '通关')\n\t\t})\n\t}\n\t// 礼花\n\tdisplayShell() { \n\t\tconsole.log('success  displayShell', this.shellTimeline)\n\t\tthis.stage.addChild(this.fireworksContainer)\n\t\tconsole.log(this.shellTimeline)\n\t\t// 创建一条时间轴\n\t\tif(this.shellTimeline === undefined) {\n\t\t\t// 礼花随机位置\n\t\t\tthis.gridProps.cell.width = 12\n\t\t\tlet rnd = (new Gridistribution(this.gridProps)).pick(this.fireworks.length)\n\t\t\t// 时间轴数组\n\t\t\tlet tls = rnd.map(({x, y}, index) => { \n\t\t\t\tlet shell = this.fireworks[index]\n\t\t\t\tshell.set(\n\t\t\t\t\t{\n\t\t\t\t\t\tscaleX: 1, \n\t\t\t\t\t\tscaleY: 1, \n\t\t\t\t\t\tanchorX: .5, \n\t\t\t\t\t\tanchorY: .5,  \n\t\t\t\t\t\ttop: 90, \n\t\t\t\t\t\tleft: 90\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tthis.fireworksContainer.addChild(shell)\n\t\t\t\tlet tl = new TimelineLite()\n\t\t\t\ttl\n\t\t\t\t\t.fromTo(\n\t\t\t\t\t\tshell, .6, \n\t\t\t\t\t\t{rotation: 0, left: x, top: y, scaleX: 0, scaleY: 0, alpha: 0}, \n\t\t\t\t\t\t{rotation: Math.PI, scaleX: 1, scaleY: 1, alpha: .5}\n\t\t\t\t\t)\n\t\t\t\t\t.to(\n\t\t\t\t\t\tshell, 1.2, \n\t\t\t\t\t\t{top: '+=560', left: (Math.random() > .5 ? '+' : '-')+ '=80', rotation: 0, alpha: 0}\n\t\t\t\t\t)\n\t\t\t\treturn tl\n\t\t\t})\n\t\t\tthis.shellTimeline = new TimelineLite()\n\t\t\tthis.shellTimeline.pause()\n\t\t\tthis.shellTimeline.add(tls, 0, 'start', 0.03)\n\t\t}\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconsole.log('new Promise', this.shellTimeline)\n\t\t    this.stage.removeChild(this.fireworksContainer)\n\t\t\tresolve()\n\t\t\t// this.shellTimeline.restart().call(e => {\n\t\t\t// \tconsole.log('this.shellTimeline.restart', e)\n\t\t\t// \tthis.stage.removeChild(this.fireworksContainer)\n\t\t\t// \tresolve()\n\t\t\t// })\n\t\t})\n\t}\n\t// 销毁\n\tdestroy() {\n\t\ttimer.clean()\n\t\tTweenMax.killAll()\n\t\tthis.destroyChildren(this.stage)\n\t\tthis.stage.off(this.touchmove)\n\t\tthis.stage.off(this.touchend)\n\t\t// 销毁所有的纹理\n\t\tPIXI.utils.destroyTextureCache()\n\t\t// 删除加载记录\n\t\tPIXI.loader.reset()\n\t\tthis.loaded = false\n\t\tdelete this.shellTimeline\n\t}\n\n\t// 销毁子孙元素\n\tdestroyChildren(parent) {\n\t\tlet children = parent.children\n\t\twhile(children.length > 0) {\n\t\t\tlet child = children[0]\n\t\t\tparent.removeChild(child)\n\t\t\t// 递归删除\n\t\t\tthis.destroyChildren(child)\n\t\t\tchild.destroy()\n\t\t}\n\t}\n\n\t// 销毁所有拼块\n\tdestroyCliparts() {\n\t\tthis.cliparts.forEach(clipart => {\n\t\t\tlet {\n\t\t\t\tsprite, \n\t\t\t\tselected, \n\t\t\t\tsprite: {parent: parentA}, \n\t\t\t\tselected: {parent: parentB}\n\t\t\t} = clipart\n\t\t\tsprite.destroy()\n\t\t\tselected.destroy()\n\t\t\tparentA !== null && parentA !== this.puzzle && parentA.destroy()\n\t\t\tparentB !== null && parentB !== this.puzzle && parentB.destroy()\n\t\t})\n\t\tthis.negative && this.negative.destroy()\n\t}\n\n\t// 倒计时\n\tcountdown() {\n\t\tthis.timer = timer.setInterval(e => { \n\t\t\tthis.currentTime -= .1\n\t\t\tif(this.currentTime > 0) {\n\t\t\t\tthis.timeProgress = this.currentTime\n\t\t\t}\n\t\t\t// 游戏结束\n\t\t\telse { \n\t\t\t\tthis.pause()\n\t\t\t\ttimer.delete(this.timer)\n\t\t\t\tthis.event.dispatch('gameover', '超时')\n\t\t\t}\n\t\t}, 100)\n\t}\n\n\t// 暂停\n\tpause() { \n\t\tthis.paused = true\n\t\tTweenMax.pauseAll()\n\t\tthis.ticker.stop()\n\t\ttimer.pause()\n\t}\n\t// 恢复\n\tresume() { \n\t\tthis.paused = false\n\t\tTweenMax.resumeAll()\n\t\tthis.ticker.start()\n\t\ttimer.resume()\n\t}\n}\n\nexport default Puzzle\n","import Puzzle from './Puzzle'\n\nimport '../css/puzzle.css'\n\n// 关卡信息\nconst levels = [\n  {\n    // 大图\n    picture: require('../images/pictures/a.jpg'), \n    // 小图\n    thumb: require('../images/covers/a.jpg'), \n    // 描述\n    instr: \"秋天的银杏树\", \n    // 免费\n    free: true\n  }, \n  {\n    // 大图\n    picture: require('../images/pictures/b.jpg'), \n    // 小图\n    thumb: require('../images/covers/b.jpg'), \n    // 描述\n    instr: \"毕加索的画 ---- 少女\", \n    // 免费\n    free: true\n  }, \n  {\n    // 大图\n    picture: require('../images/pictures/c.jpg'), \n    // 小图\n    thumb: require('../images/covers/c.jpg'), \n    // 描述\n    instr: \"毕加索的画 ---- 树\", \n    // 免费\n    free: true\n  }, \n  {\n    // 大图\n    picture: require('../images/pictures/d.jpg'), \n    // 小图\n    thumb: require('../images/covers/d.jpg'), \n    // 描述\n    instr: \"毕加索的画 ---- 桥\", \n    // 免费\n    free: true\n  }, \n  {\n    // 大图\n    picture: require('../images/pictures/e.jpg'), \n    // 小图\n    thumb: require('../images/covers/e.jpg'), \n    // 描述\n    instr: \"不知道哪里来的美女\", \n    // 免费\n    free: false\n  }\n]\n\n// 从 localStorage 中读取记录\nconst record = JSON.parse(localStorage.getItem(\"puzzle-record\")) || {level: -1, difficulty: 2}\n// 初始化列表\npuzzleList.innerHTML = levels.map(\n  (level, index) =>\n    `\n      <li\n        onclick=\"this.className === \\'puzzle_lock\\' || selectLevel(${index})\"\n        ${record.level < index && level.free !== true ? 'class=\"puzzle_lock\"' : ''}\n      >\n        <span class=\"puzzle_map_thumb\">\n          <img src=\"${level.thumb}\">\n        </span>\n        <span class=\"puzzle_map_instr\">\n          ${level.instr}<br>\n          <b>${level.free === true ? '免费' : '解锁可玩'}</b>\n        </span>\n      </li>\n    `\n).join(\"\\n\")\n\nconst puzzleLevel = puzzleList.querySelectorAll(\"li\")\n\n// 显示地图 \nglobal.showPuzzleMap = function() {\n  puzzleMap.className = \"puzzle_map show\"\n}\n// 隐藏地图\nglobal.hidePuzzleMap = function() {\n  puzzleMap.className = \"puzzle_map\";  \n}\n\n// 选择关卡\nglobal.selectLevel = function(index) { \n  puzzleGame.className = \"puzzle_game show\"\n  setTimeout(function() {\n    puzzle.enter(levels[index].picture)\n    record.level = index\n    updateRecord()\n  }, 600)\n}\n\n// 返回\nglobal.back = function() {\n  puzzleAd.style.display = \"none\"\n  puzzleGame.className = \"puzzle_game\"\n}\n\n// 更新记录\nconst updateRecord = function() {\n  localStorage.setItem(\"puzzle-record\", JSON.stringify(record))\n}\n\n// 设置难度\nconst setDifficulty = function(difficulty) { \n  difficulty = difficulty | 0\n  difficulty = difficulty > 1 ? difficulty : 1\n  difficultyOpts[difficulty - 1].checked = \"checked\"\n  puzzle.difficulty = difficulty\n  puzzle.totalTime = difficulty * 120\n}\n\n// 创建拼图对象\nconst puzzle = new Puzzle()\n\n// 默认进入第一张图\npuzzle.init()\n// 设置倒计时\npuzzle.totalTime = 60\n\n// 通关\npuzzle.event.on(\"pass\", function() { \n  console.log('pass event', )\n  if(record.level < levels.length - 1) { \n    // 解锁\n    puzzleLevel[++record.level].className = \"\"\n    puzzle.enter(levels[record.level].picture)\n    updateRecord();  \n  }\n  else {\n    alert(\"游戏结束\")\n    back()\n  }\n})\n\n// 游戏结束\npuzzle.event.on(\"gameover\", function() {\n  alert(\"超时了\")\n})\n\n// 暂停显示广告\npuzzle.event.on(\"pause\", function() {\n  puzzleAd.style.display = \"block\"\n})\n\n// 恢复隐藏广告\npuzzle.event.on(\"resume\", function() {\n  puzzleAd.style.display = \"none\"\n})\n\n// 难度选项\nconst difficultyOpts = document.querySelectorAll(\".puzzle_difficulty\")\ndifficultyOpts.forEach(function(opt) {\n  opt.addEventListener(\"click\", function() {\n    record.difficulty = this.value\n    puzzle.difficulty = this.value\n    updateRecord()\n  })\n})\n\n// 同步游戏难度\nsetDifficulty(record.difficulty)\n\n// 玩过 \nif(record.level >= 0) {\n  resumeGame.className = \"puzzle_btn\"\n  resumeGame.onclick = function() {\n    selectLevel(record.level)\n  }\n}\n// 没玩过\nelse {\n  resumeGame.className = \"puzzle_btn disabled\"\n} \n\nglobal.puzzle = puzzle\n","/*\n\t@ author: leeenx\n\t@ 事件封装\n\t@ object.on(event, fn) // 监听一个事件\n\t@ object.off(event, fn) // 取消监听\n\t@ object.once(event, fn) // 只监听一次事件\n\t@ object.dispacth(event, arg) // 触发一个事件\n*/\n\nexport default class Event {\n\tconstructor() {\n\t\t// 定义的事件与回调\n\t    this.defineEvent = {}; \n\t}\n\t// 注册事件\n\tregister(event, cb) { \n\t\tif(!this.defineEvent[event]) {\n\t\t\t(this.defineEvent[event] = [cb]); \n\t\t}\n\t\telse {\n\t\t\tthis.defineEvent[event].push(cb); \n\t\t} \n\t}\n\t// 派遣事件\n\tdispatch(event, arg) {\n\t\tif(this.defineEvent[event]) {{\n            for(let i=0, len = this.defineEvent[event].length; i<len; ++i) { \n                this.defineEvent[event][i] && this.defineEvent[event][i](arg); \n            }\n        }}\n\t}\n\t// on 监听\n\ton(event, cb) {\n\t\treturn this.register(event, cb); \n\t}\n\t// off 方法\n    off(event, cb) {\n        if(this.defineEvent[event]) {\n            if(typeof(cb) == \"undefined\") { \n                delete this.defineEvent[event]; // 表示全部删除 \n            } else {\n                // 遍历查找 \n                for(let i=0, len=this.defineEvent[event].length; i<len; ++i) { \n                    if(cb == this.defineEvent[event][i]) {\n                        this.defineEvent[event][i] = null; // 标记为空 - 防止dispath 长度变化 \n                        // 延时删除对应事件\n                        setTimeout(() => this.defineEvent[event].splice(i, 1), 0); \n                        break; \n                    }\n                }\n            }\n        } \n    }\n\n    // once 方法，监听一次\n    once(event, cb) { \n        let onceCb = () => {\n        \tcb && cb(); \n        \tthis.off(event, onceCb); \n        }\n        this.register(event, onceCb); \n    }\n    // 清空所有事件\n    clean() {\n        this.defineEvent = {}; \n    }\n}","/*\n\t@ author: leeenx\n\t@ name: 网格随机分布算法\n*/\n\nexport default class Gridistribution{\n\tconstructor(...args) {\n\t\tthis.init(...args); \n\t}\n\t// 初始化\n\tinit({width, height, cell = {width: 10}, rectangles = []}) {\n\t\twidth = width >> 0; \n\t\theight = height >> 0; \n\t\t// 格子的高默认与它的宽一样\n\t\tcell.height === undefined && (cell.height = cell.width); \n\t\t// 列数\n\t\tlet col = width / cell.width >> 0; \n\t\t// 行数\n\t\tlet row = height / cell.height >> 0; \n\t\t// 宽高修正\n\t\t[cell.width, cell.height] = [width / col, height / row]; \n\t\t// 表格数组\n\t\tthis.grid = new Array(col * row); \n\t\tfor(let i = 0; i < row; ++i) {\n\t\t\tfor(let j = 0; j < col; ++j) { \n\t\t\t\tlet index = i * col + j; \n\t\t\t\tthis.grid[index] = {\n\t\t\t\t\tindex, \n\t\t\t\t\tx: cell.width * j, \n\t\t\t\t\ty: cell.height * i, \n\t\t\t\t\twidth: cell.width, \n\t\t\t\t\theight: cell.height, \n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// 挂载属性\n\t\tObject.assign(this, {row, col, width, height, cell: cell}); \n\t\t// 剔除不可分布成员\n\t\tthis.trim(rectangles); \n\t}\n\t// 重置\n\treset(...args) { \n\t\tthis.init(...args); \n\t}\n\t_shuffle(a) {\n\t    for (let i = a.length; i; i--) {\n\t        let j = Math.floor(Math.random() * i);\n\t        [a[i - 1], a[j]] = [a[j], a[i - 1]];\n\t    }\n\t    return a;\n\t}\n\t// 从数组中剔除空洞\n\ttrim(rectangles) { \n\t\trectangles.forEach(({x, y, width, height}) => {\n\t\t\t// 把 rectangle 框起的范围从 grid 中删除\n\t\t\tlet startCol = x / this.cell.width >> 0; \n\t\t\tlet startRow = y / this.cell.height >> 0; \n\t\t\tlet endCol = (x + width) / this.cell.width >> 0; \n\t\t\tlet endRow = (y + height) / this.cell.height >> 0; \n\t\t\tfor(let i = startRow; i <= endRow; ++i) {\n\t\t\t\tfor(let j = startCol; j <= endCol; ++j) {\n\t\t\t\t\tlet index = i * this.col + j; \n\t\t\t\t\tthis.grid[index].isRemoved = true; \n\t\t\t\t}\n\t\t\t}\n\t\t}); \n\t\t// 生成压缩后的格子\n\t\tthis.cells = this.grid.filter(cell => !cell.isRemoved); \n\t\tthis.shuffleCells = this._shuffle(this.cells.concat([])); \n\t}\n\t// 随机返回 count 个格子\n\tpick(count) {\n\t\tif(count > this.shuffleCells.length) {\n\t\t\t// throw(\"超出范围\"); \n\t\t\treturn []; \n\t\t}\n\t\treturn this.shuffleCells.slice(0, count); \n\t}\n}","/*\n    author: leeenx\n    @ timer 对象\n    @ 提供 7 个API如下：\n    @ timer.setTimeout(fun, delay[, id])\n    @ timer.clearTimeout(id)\n    @ timer.setInterval(fun, delay[, id])\n    @ timer.clearInterval(id)\n    @ timer.delete(id) 删除对应id的timeout/interval\n    @ timer.pause(id) 暂停对应id的timeout/interval\n    @ timer.resume(id) 恢复对应id的timeout/interval\n    @ timer.clean() 清空所有 timeout & interval\n*/\n\nclass Timer {\n    // 构造函数 \n    constructor() { \n        // 暂停状态 - 这是个公共状态，由外部 Ticker 决定。\n        this.paused = true\n\n        // 队列\n        this.queue = new Map()\n\n        // 正在使用 timer 的 RAF\n        this.usingRAF = false\n\n        // useRAF 触发器\n        Reflect.defineProperty(this, \"useRAF\", {\n            set: function(value) {\n                Reflect.set(this, \"usingRAF\", value)\n                value ? Timer.RAF.enable() : Timer.RAF.disable()\n            }\n        })\n    }\n\n    // setTimeout 的实现\n    setTimeout(fn, delay, id = Symbol(\"timeoutID\")) { \n        // 存入队列 \n        this.queue.set(id, {\n            fn: fn, \n            type: 0, \n            paused: 0, \n            elapsed: 0, \n            delay: delay\n        })\n        return id\n    }\n\n    // clearTimeout\n    clearTimeout(id) {\n        return this.delete(id)\n    }\n\n    // setInterval 的实现\n    setInterval(fn, delay, id = Symbol(\"intervalID\")) {\n        // 存入队列\n        this.queue.set(id, {\n            fn: fn, \n            type: 1, \n            paused: 0, \n            elapsed: 0, \n            delay: delay\n        })\n        return id\n    }\n\n    // clearInterval\n    clearInterval(id) {\n        return this.delete(id)\n    }\n\n    // 修改指定id的 delay/fn\n    set(id, config = {}) { \n        let item = this.queue.get(id) || {}\n        for(let key in config) {\n            item[key] = config[key]\n        }\n\treturn true\n    }\n\n    // 删除 queue 上的成员\n    delete(id) {\n        return this.queue.delete(id)\n    }\n\n    // 暂停指定id\n    pause(id) {\n        id === undefined ? this.pauseAll() : (this.queue.get(id).paused = 1)\n\treturn true\n    }\n\n    // 恢复指定id\n    resume(id) {\n        return this.play(id)\n    } \n    \n    // 播放指定id\n    play(id) {\n        id === undefined ? this.playAll() : (this.queue.get(id).paused = 0)\n\treturn true\n    } \n\n    // 清空timer\n    clean() {\n        this.queue = new Map()\n\treturn true\n    }\n\n    // 暂停全部 id\n    pauseAll() {\n        this.queue.forEach((item) => item.paused = 1)\n\treturn true\n    }\n\n    // 播放全部 id\n    playAll() {\n        this.queue.forEach((item) => item.paused = 0)\n\treturn true\n    }\n\n    // tick\n    tick(delta) { \n        this.paused || this.updateQueue(delta)\n    }\n\n    // 更新 map 队列\n    updateQueue(delta) { \n        this.queue.forEach((item, id) => {\n            if(item.paused === 1) return\n            item.elapsed += delta\n            if(item.elapsed >= item.delay) {\n                item.fn()\n                item.type === 0 ? this.delete(id) : (item.elapsed = 0)\n            } \n        })\n    }\n\n    // 状态更新\n    update() { \n        // 第一次调用 update 时主动停用原生接口\n        this.useRAF = false\n\n        // 下面是真正的 update\n        this.update = (delta) => {\n        \tif(this.usingRAF) return\n\t        this.tick(delta)\n        } \n    }\n\n}\n\nclass AnimationFrame { \n    constructor() {\n        this.time = 0\n        this.auto = this.auto.bind(this)\n    }\n    auto(elapsed) { \n        timer.tick(elapsed - this.time)\n        this.time = elapsed\n        this.id = requestAnimationFrame(this.auto)\n    }\n    enable() { \n        timer.paused = false\n        this.id = requestAnimationFrame(this.auto)\n    }\n    disable() {\n        cancelAnimationFrame(this.id)\n    }\n}\n\n// 原生RAF\nTimer.RAF = new AnimationFrame()\n\n// 对外接口\nlet timer = new Timer()\n\n// 默认使用原生 RAF\ntimer.useRAF = true\n// 导出timer\nexport default timer; ","/*\n\t@ PIXI 扩展\n*/\n// DisplayObject 的原型\nvar proto = PIXI.DisplayObject.prototype\nproto.set = function(arg) {\n\tfor(let key in arg) {\n\t\tthis[key] = arg[key]\n\t}\n}\n\nproto.offsetX = proto.offsetY = 0\n\nObject.defineProperties(proto, {\n\tscaleX: {\n\t\tset: function(value) { \n\t\t\tif(this.scale.x !== value) { \n\t\t\t\tthis.scale.x = value\n\t\t\t}\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.scale.x\n\t\t}\n\t}, \n\tscaleY: {\n\t\tset: function(value) { \n\t\t\tif(this.scale.y !== value) { \n\t\t\t\tthis.scale.y = value\n\t\t\t}\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.scale.y\n\t\t}\n\t}, \n\tskewX: {\n\t\tset: function(value) {\n\t\t\tif(this.skew.x !== value) { \n\t\t\t\tthis.skew.x = value\n\t\t\t}\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.skew.x\n\t\t}\n\t}, \n\tskewY: {\n\t\tset: function(value) {\n\t\t\tif(this.skew.y !== value) { \n\t\t\t\tthis.skew.y = value\n\t\t\t}\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.skew.y\n\t\t}\n\t}, \n\trotate: {\n\t\tset: function(value) {\n\t\t\tif(this.rotation !== value) { \n\t\t\t\tthis.rotation = value\n\t\t\t}\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.rotation\n\t\t}\n\t}, \n\tpivotX: {\n\t\tset: function(value) {\n\t\t\tthis.pivot.x = value\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.pivot.x\n\t\t}\n\t}, \n\tpivotY: {\n\t\tset: function(value) {\n\t\t\tthis.pivot.y = value\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.pivot.y\n\t\t}\n\t}, \n\tanchorX: {\n\t\tset: function(value) {\n\t\t\tthis.anchor.x = value\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.anchor.x\n\t\t}\n\t}, \n\tanchorY: {\n\t\tset: function(value) {\n\t\t\tthis.anchor.y = value\n\t\t}, \n\t\tget: function() {\n\t\t\treturn this.anchor.y\n\t\t}\n\t}, \n\torigin: {\n\t\tget: function() { \n\t\t\treturn [this.pivot.x, this.pivot.y]\n\t\t}, \n\t\tset: function(coord) { \n\t\t\t// rotation/skew/scale 会影响 pivot 定位\n\t\t\tlet parent = this.parent || this._tempDisplayObjectParent\n\t\t\t// 未形变的左上角坐标\n\t\t\tlet pointA = {x: this._left, y: this._top}\n\t\t\t// 形变后的中心坐标\n\t\t\tlet pointB = parent.toLocal(new PIXI.Point(coord[0], coord[1]), this)\n\t\t\t\n\t\t\t// 盒子偏移\n\t\t\tthis.boxOffsetX = pointB.x - (pointA.x + coord[0])\n\t\t\tthis.boxOffsetY = pointB.y - (pointA.y + coord[1])\n\t\t\t// 几何中心的偏移量\n\t\t\tthis.offsetX = pointB.x - pointA.x - this.boxOffsetX\n\t\t\tthis.offsetY = pointB.y - pointA.y - this.boxOffsetY\n\n\t\t\tthis.x = this._left + this.offsetX\n\t\t\tthis.y = this._top + this.offsetY\n\n\t\t\tthis.pivot.set(coord[0], coord[1])\n\t\t}\n\t}, \n\tleft: { \n\t\tget: function() {\n\t\t\treturn this._left\n\t\t}, \n\t\tset: function(value) {\n\t\t\tthis._left = value\n\t\t\tthis.x = value + this.offsetX\n\t\t}\n\t}, \n\tright: {\n\t\tget: function() {\n\t\t\treturn this._right\n\t\t}, \n\t\tset: function(value) { \n\t\t\tif(value === undefined) return \n\t\t\tthis._right = value\n\t\t\t// 由 left 实现 \n\t\t\tthis.left = this.parent.width - this.width - value\n\t\t}\n\t}, \n\ttop: { \n\t\tget: function() {\n\t\t\treturn this._top\n\t\t}, \n\t\tset: function(value) { \n\t\t\tthis._top = value\n\t\t\tthis.y = value + this.offsetY\n\t\t}\n\t}, \n\tbottom: {\n\t\tget: function() {\n\t\t\treturn this._bottom\n\t\t}, \n\t\tset: function(value) { \n\t\t\tif(value === undefined) return \n\t\t\tthis._bottom = value\n\t\t\t// 由 top 实现\n\t\t\tthis.top = this.parent.height - this.height - value\n\t\t}\n\t}, \n\t// 运动时间\n\ttime: {\n\t\tset: function(t) { \n\t\t\tlet elapsed = t - this._t || t\n\t\t\tthis._t = t\n\t\t\tlet {velocityX, velocityY, accelerationX, accelerationY} = this\n\t\t\t// 当前速度 \n\t\t\tthis.velocityX += elapsed * accelerationX\n\t\t\tthis.velocityY += elapsed * accelerationY\n\t\t\t// 当前位置\n\t\t\tthis.x += (this.velocityX + velocityX) * elapsed / 2\n\t\t\tthis.y += (this.velocityY + velocityY) * elapsed / 2\n\t\t}, \n\t\tget: function() {return this._t}\n\t}, \n\tindex: {\n\t\tset: function(value) {\n\t\t\tif(this._index !== value) {\n\t\t\t\tthis._index = value\n\t\t\t\tthis.parent.setChildIndex(this, value)\n\t\t\t}\n\t\t}, \n\t\tget: () => this._index\n\t}\n})\n\n// 为原型添加速度与加速度属性等\nObject.assign(\n\tproto, \n\t{\n\t\tvelocityX: 0, \n\t\tvelocityY: 0, \n\t\taccelerationX: 0, \n\t\taccelerationY: 0, \n\t\t_top: 0, \n\t\t_left: 0\n\t}\n)\n\n// 监听 addChild\nvar _addChild = PIXI.Container.prototype.addChild\nPIXI.Container.prototype.addChild = function() { \n\tvar len = arguments.length\n\tif(len === 0) return \n\t_addChild.apply(this, arguments)\n\t// 更新 right & bottom\n\tfor(var i = 0; i < len; ++i) { \n\t\tvar child = arguments[i]\n\t\tchild.right = child._right\n\t\tchild.bottom = child._bottom\n\t}\n}\nvar _addChildAt = PIXI.Container.prototype.addChildAt\nPIXI.Container.prototype.addChildAt = function(child, index) {\n\t_addChildAt.call(this, child, index)\n\t// 更新 right & bottom\n\tchild.right = child._right\n\tchild.bottom = child._bottom\n}\n\n// 获取不带描边的boudary\n{\n    let dirty = Symbol(\"dirty\")\n    let getContentBox = function() {\n        if(this[dirty] == this.dirty) return \n        this[dirty] = this.dirty; // 表示已经更新\n        let cp = this.clone()\n        let graphicsData = cp.graphicsData\n        for(let graphics of graphicsData) {\n            graphics.lineWidth = 0\n        } \n        this._cwidth = cp.width\n        this._cheight = cp.height\n    }\n    Object.defineProperties(PIXI.Graphics.prototype, {\n        \"_cwidth\": {writable: true, value: 0}, \n        \"_cheight\": {writable: true, value: 0}, \n        \"cwidth\": {\n            get: function() {\n                getContentBox.call(this)\n                return this._cwidth\n            }\n        }, \n        \"cheight\": {\n            get: function() {\n                getContentBox.call(this)\n                return this._cheight\n            }\n        }\n    })\n}\n\n// 动态生成 DisplayObject 缓存\nPIXI.DisplayObject.prototype.generateCanvasTexture = function(renderer) { \n\tlet rect = this.getBounds()\n\tlet cache = PIXI.RenderTexture.create(rect.width, rect.height)\n\tthis.setTransform()\n\trenderer.render(this, cache)\n\treturn cache\n}\n\n// 封装微信手Q的 visibilitychange 事件\ndocument.addEventListener(\"qbrowserVisibilityChange\", function(e){\n    var evt = document.createEvent(\"HTMLEvents\")\n    evt.initEvent(\"visibilitychange\", false, false)\n    evt.hidden = e.hidden\n    document.dispatchEvent(evt)\n}, true)\ndocument.addEventListener(\"visibilitychange\", function(e) {\n    e.hidden = e.hidden === undefined ? document.hidden : e.hidden\n}, true)\n\n\n\n\n\n\n","module.exports = TweenMax;","module.exports = PIXI;","module.exports = PIXI[\"filters\"];"],"sourceRoot":""}